"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.delayRetry = void 0;
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
function delayRetry({ maxAttempts = 3, duration = 1000 } = {}) {
    return operators_1.retryWhen((attempts) => attempts.pipe(operators_1.mergeMap((error, i) => {
        const retryAttempt = i + 1;
        if (retryAttempt > maxAttempts) {
            return rxjs_1.throwError(error);
        }
        return rxjs_1.timer(retryAttempt * duration);
    })));
}
exports.delayRetry = delayRetry;
//# sourceMappingURL=delayRetry.js.map